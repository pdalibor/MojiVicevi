<!DOCTYPE html>
<html>
    <head>
        <title>MojiVicevi</title>
        <meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
		<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
        <link rel="stylesheet" href="css/jquery.mobile-1.3.2.min.css"/>
        <link rel="stylesheet" href="http://example.gajotres.net/iscrollview/jquery.mobile.iscrollview.css"/>
		<link rel="stylesheet" href="http://example.gajotres.net/iscrollview/jquery.mobile.iscrollview-pull.css"/>
		<style>
			.ui-content {
				padding: 0 !important;
			}
 
			.ui-listview {
				margin: 0 !important;
			}
 
			.example-wrapper, .example-wrapper div.iscroll-scroller {
				width: 100% !important;
			}
			
			.entry-content { padding:0px 10px 10px 10px;}
			.entry-content h2{font-size:16px;color:#367fd8;}			
			.entry-content p {
				font-size:1.0em;
				margin-bottom:15px;
				line-height:165%;
				color:#444;				
				text-align:justify;
			}		
			
			.clr{
			clear: both;
			padding: 0;
			height: 0;
			margin: 0;}
			
			.linija {border-bottom: 1px solid #CCC; padding-top: 10px;}
		</style>
        <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
        <script src="js/jquery.mobile-1.3.2.min.js"></script>
        <script src="http://example.gajotres.net/iscrollview/iscroll.js"></script>
		<script src="http://example.gajotres.net/iscrollview/jquery.mobile.iscrollview.js"></script>
		<script>
			$(document).on('pageinit', '#home', function(){
				$.ajax({
					url: 'http://www.mojivicevi.com/vicevi_android.php?tab=1' ,
					dataType: "jsonp",
					async: true,
					success: function (result) {						
						localStorage.setItem("najnovijiDb", JSON.stringify(result));
					},
					error: function (request,error) {					
						//alert('Network error has occurred please try again!');
					}
				}); 
				
				$.ajax({
					url: 'http://www.mojivicevi.com/vicevi_android.php?tab=2' ,
					dataType: "jsonp",
					async: true,
					success: function (result) {						
						localStorage.setItem("viceviDanaDb", JSON.stringify(result));
					},
					error: function (request,error) {					
						//alert('Network error has occurred please try again!');
					}
				}); 
				
				$.ajax({
					url: 'http://www.mojivicevi.com/vicevi_android.php?tab=3' ,
					dataType: "jsonp",
					async: true,
					success: function (result) {						
						localStorage.setItem("najboljiDb", JSON.stringify(result));
					},
					error: function (request,error) {					
						//alert('Network error has occurred please try again!');
					}
				});
					
				//Set initial page
				var najnovijiJson = JSON.parse(localStorage.getItem('najnovijiDb'));
				var najnovijiAll = '';
				for (var i = 0, len = najnovijiJson.length; i < len; ++i) {
					var vic = najnovijiJson[i];
					var vicTekst = vic.tekst;
					var vicNaslov = vic.naslov;
					najnovijiAll = najnovijiAll.concat('<div class=\"entry-content\"><p><h2>');
					najnovijiAll = najnovijiAll.concat(vicNaslov);
					najnovijiAll = najnovijiAll.concat('</h2><p>');
					najnovijiAll = najnovijiAll.concat(vicTekst);					
					najnovijiAll = najnovijiAll.concat('</p><div class=\"clr linija\"></div></div>');				
				}
				$('#sadrzaj').html(najnovijiAll);
			});
 
			$(document).on('vclick', '#najnoviji', function(){  
				var najnovijiJson = JSON.parse(localStorage.getItem('najnovijiDb'));
				var najnovijiAll = '';
				for (var i = 0, len = najnovijiJson.length; i < len; ++i) {
					var vic = najnovijiJson[i];
					var vicTekst = vic.tekst;	
					najnovijiAll = najnovijiAll.concat(vicTekst);
					najnovijiAll = najnovijiAll.concat('<br><br>------------------------------------<br><br>');				
				}
				$('#sadrzaj').html(najnovijiAll);
			});
 
			$(document).on('vclick', '#viceviDana', function(){ 
				var viceviDanaJson = JSON.parse(localStorage.getItem('viceviDanaDb'));
				var viceviDanaAll = '';
				for (var i = 0, len = viceviDanaJson.length; i < len; ++i) {
					var vicDana = viceviDanaJson[i];
					var vicDanaTekst = vicDana.tekst;	
					viceviDanaAll = viceviDanaAll.concat(vicDanaTekst);
					viceviDanaAll = viceviDanaAll.concat('<br><br>------------------------------------<br><br>');				
				}
				$('#sadrzaj').html(viceviDanaAll);
			});
			
			$(document).on('vclick', '#najbolji', function(){  
				var najboljiJson = JSON.parse(localStorage.getItem('najboljiDb'));
				var najboljiAll = '';
				for (var i = 0, len = najboljiJson.length; i < len; ++i) {
					var vic = najboljiJson[i];
					var vicTekst = vic.tekst;	
					najboljiAll = najboljiAll.concat(vicTekst);
					najboljiAll = najboljiAll.concat('<br><br>------------------------------------<br><br>');				
				}
				$('#sadrzaj').html(najboljiAll);
			});
 
				
		</script>
    </head>
    <body>  
		<div data-role="page" id="home">
			<div data-role="header" data-id="foo1" data-position="fixed" data-theme="b" style="overflow:hidden;">
				<h1>MojiVicevi</h1>    
				<div data-role="navbar">
					<ul>
						<li><a href="#" id="najnoviji">Najnoviji</a></li>
						<li><a href="#" id="viceviDana">Vicevi dana</a></li>
						<li><a href="#" id="najbolji">Najbolji</a></li>
					</ul>
				</div><!-- /navbar -->
			</div><!-- /header --> 
			<div data-role="content" id="sadrzajPage">
				<div class="example-wrapper" data-iscroll>
					<div data-role="content" id="sadrzaj">
					f
						<p>Page content goes here.</p>
					</div><!-- /content -->
				</div>
			</div>
			
			
		</div><!-- /home --> 
		
    </body>
</html>